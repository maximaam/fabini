{% extends 'base.html.twig' %}

{% set locale = app.request.locale %}

{% block body %}
    <div class="container">
        <div class="row">
            {% if product|length == 0 %}
                <div class="alert alert-info">
                    {{ 'msg.no_products_in_category'|trans }}
                </div>
            {% else %}

                <div class="col-lg-3">
                    {{ knp_menu_render('subCategory') }}
                    <div>
                        {{ product.category.description(locale) }}
                    </div>
                </div>

                <div class="col-lg-9">
                    <div class="row">
                        <div class="container product-view">
                            <h1>{{ product.title(locale)}}</h1>

                            <div id="carousel-product" class="carousel slide" data-ride="carousel">
                                {% set imgSeparator = constant('App\\Entity\\Product::IMG_SEPARATOR') %}
                                {% set images = product.images|trim(imgSeparator)|split(imgSeparator) %}

                                <!-- Indicators -->
                                <ul class="carousel-indicators">
                                    {% for key,image in images %}
                                        <li data-target="#carousel-product" data-slide-to="{{ key }}" class="{% if loop.first %}active{% endif %}"></li>
                                    {% endfor %}
                                </ul>

                                <div class="carousel-inner">
                                    {% for image in images %}
                                        <div class="carousel-item{% if loop.first %} active{% endif %}">
                                            <img src="{{ asset('/images/products/' ~ image ) }}" alt="{{ product.title(locale) }}" class="carousel-img">
                                        </div>
                                    {% endfor %}
                                </div>

                                <a class="carousel-control-prev" href="#carousel-product" data-slide="prev">
                                    <span class="carousel-control-prev-icon"></span>
                                </a>
                                <a class="carousel-control-next" href="#carousel-product" data-slide="next">
                                    <span class="carousel-control-next-icon"></span>
                                </a>
                            </div>


                            <p>{{ product.description(locale)}}</p>

                            <div class="panel panel-default">
                                <form action="{{ path('app_cart_add', {'id':product.id}) }}" name="add-to-cart" id="add-to-cart" class="form-horizontal" method="post">
                                    <div class="panel-body"></div>
                                    <div class="panel-footer">
                                        <select name="color" size="1">
                                            <optgroup label="{{ 'label.colors'|trans }}"></optgroup>
                                            {% for color in product.colors %}
                                                <option value="{{ color }}">{{ ('label.colors-set.' ~ color)|trans }}</option>
                                            {% endfor %}
                                        </select>
                                        <select name="quantity" size="1">
                                            <optgroup label="{{ 'label.quantity'|trans }}"></optgroup>
                                            {% for quantity in range(1, 10) %}
                                                <option value="{{ quantity }}">{{ quantity }}</option>
                                            {% endfor %}
                                        </select>
                                        <button type="submit" class="btn btn-primary btn-lg btn-block">
                                            <i class="fa fa-shopping-cart"></i>
                                            {{ 'cart.to-cart'|trans }}
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>

                    </div>
                </div>

            {% endif %}
        </div>
    </div>
{% endblock %}